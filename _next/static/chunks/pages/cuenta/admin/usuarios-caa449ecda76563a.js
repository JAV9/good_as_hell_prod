(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{7226:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cuenta/admin/usuarios",function(){return r(6496)}])},6496:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return u}});var t=r(5893),s=r(7294),i=r(1664),a=r.n(i),o=r(9734),d=r(9629),l=r(8193);function c(){let{data:e,error:n,isLoading:r}=function(){let{data:e,error:n,isLoading:r}=(0,o.ZP)("/api/listUsers.php",function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return fetch(...n).then(e=>e.json())});return{data:e,error:n,isLoading:r}}(),[i,c]=(0,s.useState)(e);console.log(i),(0,s.useEffect)(()=>{c(e)});let u=[{title:"Nombre",dataIndex:"name",key:"name",render:(e,n,r)=>(0,t.jsxs)("span",{children:[e," ",n.lastname]}),onFilter:(e,n)=>n.name.includes(e)},{title:"Editar",dataIndex:"id",key:"edit",render:(e,n,r)=>(0,t.jsx)(a(),{href:"/cuenta/admin/usuarios/editar?u="+n.id,children:(0,t.jsx)(l.$iz,{size:"2em"})})},{title:"Borrar",dataIndex:"id",key:"delete",render:(e,n,r)=>(0,t.jsx)("span",{onClick:()=>{window.confirm("\xbfEst\xe1s seguro de borrar el usuario "+n.name+" "+n.lastname+"?")&&h(e,n,r)},className:"pointer",children:(0,t.jsx)(l.VPh,{size:"2em"})})}];async function h(n,r,t){let s={id:n};console.log(s),await fetch("/api/deleteUser.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>e.json()).then(r=>{if(200==r.code){alert("Usuario borrado");let r=e.filter(e=>e.id!=n);console.log("newData",r),c(r)}else console.log("res",r)})}return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"max-250 margin-tb-1",children:(0,t.jsx)(a(),{href:"/cuenta/admin/usuarios/crear",children:(0,t.jsx)("button",{className:"button",children:" Crear usuario"})})}),(0,t.jsx)(d.Z,{columns:u,rowKey:"id",dataSource:i})]})})})}function u(e){var n;let{cookie:r,setCookie:s}=e;return(null===(n=r.user)||void 0===n?void 0:n.admin)===1?(0,t.jsxs)("div",{className:"w-100",children:[(0,t.jsx)(a(),{href:"/cuenta/admin",children:(0,t.jsx)("button",{className:"nav-button",children:"Atr\xe1s"})}),(0,t.jsx)(c,{})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{children:"No tienes permiso para ver esta p\xe1gina."})})}}},function(e){e.O(0,[734,583,629,774,888,179],function(){return e(e.s=7226)}),_N_E=e.O()}]);