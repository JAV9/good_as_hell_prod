(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{9311:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cuenta/admin/productos",function(){return t(973)}])},4927:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(9734);function o(){let{data:e,error:n,isLoading:t}=(0,r.ZP)("/api/listProducts.php",function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return fetch(...n).then(e=>e.json())});return{data:e,error:n,isLoading:t}}},973:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var r=t(5893),o=t(1664),i=t.n(o),s=t(7294),a=t(4927),c=t(8332),d=t(8193);function l(){let{data:e,error:n,isLoading:t}=(0,a.Z)(),[o,l]=(0,s.useState)(e);console.log(o),(0,s.useEffect)(()=>{l(e)});let u=[{title:"Nombre",dataIndex:"name",key:"name",render:e=>(0,r.jsx)("span",{children:e}),onFilter:(e,n)=>n.name.includes(e)},{title:"Editar",dataIndex:"url",key:"edit",render:e=>(0,r.jsx)(i(),{href:"/cuenta/admin/productos/editar?p="+e,children:(0,r.jsx)(d.$iz,{size:"2em"})})},{title:"Borrar",dataIndex:"id",key:"delete",render:(e,n,t)=>(0,r.jsx)("span",{onClick:()=>{window.confirm("\xbfEst\xe1s seguro de borrar el producto"+n.name+"?")&&h(e,n,t)},className:"pointer",children:(0,r.jsx)(d.VPh,{size:"2em"})})}];async function h(n,t,r){let o={id:n};console.log(o),await fetch("/api/deleteProduct.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>e.json()).then(t=>{if(200==t.code){alert("Producto borrado");let t=e.filter(e=>e.id!=n);console.log("newData",t),l(t)}else console.log("res",t)})}return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"max-250 margin-tb-1",children:(0,r.jsx)(i(),{href:"/cuenta/admin/productos/crear",children:(0,r.jsx)("button",{className:"button",children:" Crear producto"})})}),(0,r.jsx)(c.Z,{columns:u,rowKey:"id",dataSource:o})]})})})}function u(e){let{cookie:n,setCookie:t}=e;return(0,r.jsxs)("div",{className:"w-100",children:[(0,r.jsx)(i(),{href:"/cuenta/admin",children:(0,r.jsx)("button",{className:"nav-button",children:"Atr\xe1s"})}),(0,r.jsx)(l,{})]})}}},function(e){e.O(0,[734,332,774,888,179],function(){return e(e.s=9311)}),_N_E=e.O()}]);