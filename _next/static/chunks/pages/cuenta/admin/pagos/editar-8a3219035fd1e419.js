(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{5325:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cuenta/admin/pagos/editar",function(){return n(1145)}])},1145:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var a=n(5893),o=n(1163),l=n(7294),_=n(1664),i=n.n(_),s=n(9734),r=n(9080),c=n.n(r),d=n(3748),u=n(9548);let m=e=>{let{pid:t,puser:n,ptotal:o,pstate:_,pcreatedAt:s,pdone:r,pdoneAt:m,pusername:p}=e,[y,b]=(0,l.useState)(t),[h,x]=(0,l.useState)(n),[P,g]=(0,l.useState)(o),[f,j]=(0,l.useState)(_),[v,N]=(0,l.useState)(new Date(s)),[w,S]=(0,l.useState)(r),[E,O]=(0,l.useState)(new Date(m)),[T,A]=(0,l.useState)(p),D=e=>{console.log("selected",e),j(e)};async function C(){let e={id:y,state:f};console.log("args",e),await fetch("/api/updatePaymentState.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{200==e.code&&(console.log("pago actualizado"),alert("Pago actualizado!"))})}let L=e=>{C(),e.preventDefault()};return(0,a.jsxs)("div",{className:"admin-form admin-pagos",children:[(0,a.jsx)(i(),{href:"/cuenta/admin/pagos",children:(0,a.jsx)("button",{className:"nav-button",children:"Atr\xe1s"})}),(0,a.jsxs)("form",{className:c().form,method:"POST",onSubmit:L,children:[(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Id"}),(0,a.jsx)("input",{className:c().input,type:"text",name:"id",value:y,disabled:!0})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Usuario"}),(0,a.jsx)("input",{className:c().input,type:"text",name:"username",value:T,disabled:!0})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Estado de pago"}),(0,a.jsx)("label",{className:c().label,children:(0,a.jsx)(d.Z,{style:{width:"100%"},direction:"vertical",children:(0,a.jsx)(u.Z,{allowClear:!0,style:{width:"100%"},placeholder:"Selecciona estado",defaultValue:f,onChange:D,options:[{label:"COMENZADO",value:"COMENZADO"},{label:"COMPLETADO",value:"COMPLETADO"},{label:"ERROR",value:"ERROR"}]})})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Inicio del pago"}),(0,a.jsx)("input",{className:c().input,type:"text",name:"createdAt",value:v.toLocaleDateString("es-ES"),disabled:!0})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Fin del pago"}),(0,a.jsx)("input",{className:c().input,type:"text",name:"doneAt",value:"Invalid Date"!=E.toLocaleDateString("es-ES")?E.toLocaleDateString("es-ES"):"Sin establecer",disabled:!0})]})]})]})};var p=n(9008),y=n.n(p);function b(e){var t;let{cookie:n,setCookie:l}=e,_=(0,o.useRouter)();console.log(_.query);let{data:i,error:r,isLoading:c}=function(e){let{data:t,error:n,isLoading:a}=(0,s.ZP)("/api/getPayment.php?id="+e,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return fetch(...t).then(e=>e.json())});return{data:t,error:n,isLoading:a}}(_.query.p);console.log("data",i);let d=(0,a.jsx)(y(),{children:(0,a.jsx)("title",{children:"Editar pedido"})}),u=(0,a.jsx)(a.Fragment,{});return _.query.p&&(null===(t=n.user)||void 0===t?void 0:t.admin)===1?c?u=(0,a.jsx)("div",{children:"Cargando..."}):void 0!==i&&(u=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m,{pid:i.id,puser:i.user,ptotal:i.total,pstate:i.state,pcreatedAt:i.createdAt,pdone:i.done,pdoneAt:i.doneAt,pusername:i.username})})):u=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{children:"No tienes permiso para ver esta p\xe1gina."})}),(0,a.jsxs)(a.Fragment,{children:[d,u]})}},9080:function(e){e.exports={main:"Payment_main__dphfp",description:"Payment_description__mobLO",code:"Payment_code__B2wlX",grid:"Payment_grid__r353V",card:"Payment_card__YnBs0",center:"Payment_center__LTzz6",logo:"Payment_logo__gVXcu",thirteen:"Payment_thirteen__iih4d",rotate:"Payment_rotate__8N_io",content:"Payment_content__FChvQ",vercelLogo:"Payment_vercelLogo__5tTO2",main_category:"Payment_main_category__7uZ9o",category_overtext:"Payment_category_overtext__IFkti",product:"Payment_product__L_RVZ",white_box:"Payment_white_box__028gD",small_white_box:"Payment_small_white_box__fn5oi",white_box_medium:"Payment_white_box_medium__EeW0r",color_selection:"Payment_color_selection__KNwYi",size_selection:"Payment_size_selection__w8vf2","buy-now-btn":"Payment_buy-now-btn__1gATt",orange_button:"Payment_orange_button__cHS5q",option:"Payment_option__rtInu","option-buttons":"Payment_option-buttons__E7QkO","color-buttons":"Payment_color-buttons__8Ylyo",color_button_red:"Payment_color_button_red__mkqrs",color_button_green:"Payment_color_button_green__Xwu84",color_button_blue:"Payment_color_button_blue___2WB1","color-option":"Payment_color-option__o71jp","size-option":"Payment_size-option__G4U6t","button-panel":"Payment_button-panel__0pSjI","add-to-cart-btn":"Payment_add-to-cart-btn__MKoJE",hidden:"Payment_hidden__Y7UC_",form:"Payment_form__niDUp",input:"Payment_input__z98Hr",button:"Payment_button__VQjuW",label:"Payment_label__8wJaZ",checkbox:"Payment_checkbox__Ssw1O",labelText:"Payment_labelText__p1Y_F",asideText:"Payment_asideText__3qWIZ",registerText:"Payment_registerText__lUDUl",registerLink:"Payment_registerLink__0JAtr",field:"Payment_field__21H8A"}},9008:function(e,t,n){e.exports=n(2636)},1163:function(e,t,n){e.exports=n(6885)}},function(e){e.O(0,[734,583,774,888,179],function(){return e(e.s=5325)}),_N_E=e.O()}]);