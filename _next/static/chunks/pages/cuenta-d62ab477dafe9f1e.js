(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{9876:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cuenta",function(){return n(4823)}])},5182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientHookInServerComponentError=function(e){},(0,n(2648).Z)(n(7294)),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1414:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSearchParams=function(){a.clientHookInServerComponentError("useSearchParams");let e=r.useContext(i.SearchParamsContext),t=r.useMemo(()=>e?new f(e):null,[e]);return t},t.usePathname=function(){return a.clientHookInServerComponentError("usePathname"),r.useContext(i.PathnameContext)},Object.defineProperty(t,"ServerInsertedHTMLContext",{enumerable:!0,get:function(){return o.ServerInsertedHTMLContext}}),Object.defineProperty(t,"useServerInsertedHTML",{enumerable:!0,get:function(){return o.useServerInsertedHTML}}),t.useRouter=function(){a.clientHookInServerComponentError("useRouter");let e=r.useContext(s.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e},t.useSelectedLayoutSegments=h,t.useSelectedLayoutSegment=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"children";a.clientHookInServerComponentError("useSelectedLayoutSegment");let t=h(e);return 0===t.length?null:t[0]},Object.defineProperty(t,"redirect",{enumerable:!0,get:function(){return u.redirect}}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return l.notFound}});var r=n(7294),s=n(4224),i=n(8463),a=n(5182),o=n(3014),u=n(8781),l=n(8147);let d=Symbol("internal for urlsearchparams readonly");function c(){return Error("ReadonlyURLSearchParams cannot be modified")}class f{[Symbol.iterator](){return this[d][Symbol.iterator]()}append(){throw c()}delete(){throw c()}set(){throw c()}sort(){throw c()}constructor(e){this[d]=e,this.entries=e.entries.bind(e),this.forEach=e.forEach.bind(e),this.get=e.get.bind(e),this.getAll=e.getAll.bind(e),this.has=e.has.bind(e),this.keys=e.keys.bind(e),this.values=e.values.bind(e),this.toString=e.toString.bind(e)}}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"children";a.clientHookInServerComponentError("useSelectedLayoutSegments");let{tree:t}=r.useContext(s.LayoutRouterContext);return function e(t,n){let r,s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(s)r=t[1][n];else{var a;let e=t[1];r=null!=(a=e.children)?a:Object.values(e)[0]}if(!r)return i;let o=r[0],u=Array.isArray(o)?o[1]:o;return u?(i.push(u),e(r,n,!1,i)):i}(t,e)}t.ReadonlyURLSearchParams=f,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8147:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notFound=function(){let e=Error(n);throw e.digest=n,e},t.isNotFoundError=function(e){return(null==e?void 0:e.digest)===n};let n="NEXT_NOT_FOUND";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8781:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redirect=function(e){let t=Error(n);throw t.digest="".concat(n,";").concat(e),t},t.isRedirectError=r,t.getURLFromRedirectError=function(e){return r(e)?e.digest.slice(n.length+1):null};let n="NEXT_REDIRECT";function r(e){return"string"==typeof(null==e?void 0:e.digest)&&e.digest.startsWith(n+";")&&e.digest.length>n.length+1}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3014:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useServerInsertedHTML=function(e){let t=r.useContext(s);t&&t(e)},t.ServerInsertedHTMLContext=void 0;var r=(0,n(1598).Z)(n(7294));let s=r.default.createContext(null);t.ServerInsertedHTMLContext=s},4823:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(5893);n(5675);var s=n(9332),i=n(7294),a=n(402),o=n.n(a),u=n(1664),l=n.n(u);let d=e=>{let{hidden:t,onRegisterClick:n,email:s,setEmail:i,pwd:a,setPwd:u,address:d,setAddress:c,name:f,setName:h,lastname:p,setLastname:m,signUp:x}=e,g=e=>{x(),e.preventDefault()};return(0,r.jsx)("div",{className:t?o().hidden:"",children:(0,r.jsxs)("form",{className:o().form,method:"POST",onSubmit:g,children:[(0,r.jsx)("h2",{children:"Crea tu cuenta"}),(0,r.jsx)("div",{className:"field",children:(0,r.jsx)("input",{className:o().input,type:"text",name:"name",value:f,onChange:e=>h(e.target.value),placeholder:"Nombre",required:!0})}),(0,r.jsx)("div",{className:"field",children:(0,r.jsx)("input",{className:o().input,type:"text",name:"lastname",value:p,onChange:e=>m(e.target.value),placeholder:"Apellido(s)",required:!0})}),(0,r.jsx)("div",{className:"field",children:(0,r.jsx)("input",{className:o().input,type:"text",name:"address",value:d,onChange:e=>c(e.target.value),placeholder:"Direcci\xf3n",required:!0})}),(0,r.jsx)("div",{className:"field",children:(0,r.jsx)("input",{className:o().input,type:"text",name:"email",value:s,onChange:e=>i(e.target.value),placeholder:"E-mail",required:!0})}),(0,r.jsx)("div",{className:"field",children:(0,r.jsx)("input",{className:o().input,type:"password",name:"pwd",value:a,onChange:e=>u(e.target.value),placeholder:"Contrase\xf1a",required:!0})}),(0,r.jsx)("input",{className:o().button,type:"submit",value:"Registrarme"}),(0,r.jsxs)("span",{className:o().registerText+" "+o().asideText,children:["\xbfYa tienes cuenta?"," ",(0,r.jsx)(l(),{className:o().registerLink,href:"",onClick:n,children:"Login"})]})]})})},c=e=>{let{hidden:t,onRegisterClick:n,email:s,setEmail:a,pwd:u,setPwd:d,signIn:c}=e,[f,h]=(0,i.useState)(!1),p=()=>{h(!f)},m=e=>{c(),e.preventDefault()};return(0,r.jsx)("div",{className:t?o().hidden:"",children:(0,r.jsxs)("form",{method:"POST",className:o().form,onSubmit:m,children:[(0,r.jsx)("div",{className:"field",children:(0,r.jsx)("input",{className:o().input,type:"text",name:"email",value:s,onChange:e=>a(e.target.value),placeholder:"E-mail",required:!0})}),(0,r.jsx)("div",{className:"field",children:(0,r.jsx)("input",{className:o().input,type:f?"text":"password",name:"pwd",value:u,onChange:e=>d(e.target.value),placeholder:"Contrase\xf1a",required:!0})}),(0,r.jsxs)("label",{className:o().label,children:[(0,r.jsx)("input",{className:o().checkbox,type:"checkbox",onClick:p}),(0,r.jsx)("span",{className:o().labelText,children:"Muestra contrase\xf1a"})]}),(0,r.jsx)("input",{className:o().button,type:"submit",value:"Iniciar sesi\xf3n"}),(0,r.jsxs)("span",{className:o().registerText+" "+o().asideText,children:["\xbfNo tienes cuenta?"," ",(0,r.jsx)(l(),{className:o().registerLink,href:"",onClick:n,children:"Reg\xedstrate"})]})]})})};var f=n(9008),h=n.n(f);function p(e){let{cookie:t,setCookie:n,signOut:s}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{children:["Hola, usuario normal",(0,r.jsx)("button",{type:"button",onClick:()=>s(),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Logout"})]})})}function m(e){let{cookie:t,setCookie:n,signOut:s}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{children:["Hola, influencer",(0,r.jsx)("button",{type:"button",onClick:()=>s(),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Logout"})]})})}var x=n(1163);function g(e){let{cookie:t,setCookie:n}=e,[a,o]=(0,i.useState)(""),[u,l]=(0,i.useState)(""),[f,g]=(0,i.useState)(""),[v,b]=(0,i.useState)(""),[_,j]=(0,i.useState)(""),[y,S]=(0,i.useState)(!1),C=(0,x.useRouter)(),N=()=>{S(!y)};async function k(){await fetch("/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,pwd:u})}).then(e=>e.json()).then(e=>{401!==e.code&&(n("user",e,{path:"/",maxAge:3600,sameSite:!0}),n("authenticated",!0,{path:"/",maxAge:3600,sameSite:!0}))})}function L(){n("authenticated",!1,{path:"/",maxAge:3600,sameSite:!0}),n("user",{},{path:"/",maxAge:3600,sameSite:!0}),C.push("/cuenta")}async function O(){await fetch("/api/signUp.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f,lastname:v,address:_,email:a,pwd:u})}).then(e=>e.json()).then(e=>{200==e.code&&(n("user",e,{path:"/",maxAge:3600,sameSite:!0}),n("authenticated",!0,{path:"/",maxAge:3600,sameSite:!0}),(0,s.redirect)("/cuenta"))})}(0,i.useEffect)(()=>{void 0!==t.user&&(1===t.user.admin?(console.log("redirect admin"),C.push("/cuenta/admin")):1===t.user.influencer?(console.log("redirect influencer"),C.push("/cuenta/influencer")):"true"===t.authenticated&&(console.log("redirect user"),C.push("/cuenta/user")))});let T=(0,r.jsx)(h(),{children:(0,r.jsx)("title",{children:"Cuenta"})}),E=(0,r.jsx)(r.Fragment,{});return E="true"===t.authenticated?1===t.user.influencer?(0,r.jsx)(m,{signOut:L}):(0,r.jsx)(p,{signOut:L}):(0,r.jsxs)("div",{children:[(0,r.jsx)(d,{onRegisterClick:N,hidden:!y,name:f,setName:g,lastname:v,setLastname:b,address:_,setAddress:j,email:a,setEmail:o,pwd:u,setPwd:l,signUp:O}),(0,r.jsx)("div",{}),(0,r.jsx)(c,{onRegisterClick:N,hidden:y,email:a,setEmail:o,pwd:u,setPwd:l,signIn:k})]}),(0,r.jsxs)(r.Fragment,{children:[T,E]})}},402:function(e){e.exports={hidden:"Login_hidden__UWOAC",form:"Login_form__Lnts1",input:"Login_input__r_1vS",button:"Login_button__ejJ5H",label:"Login_label__wToWk",checkbox:"Login_checkbox__JRO0W",labelText:"Login_labelText__CiEjv",asideText:"Login_asideText__2YKrt",registerText:"Login_registerText__sluZP",registerLink:"Login_registerLink__s_Fb7"}},9008:function(e,t,n){e.exports=n(2636)},9332:function(e,t,n){e.exports=n(1414)},1163:function(e,t,n){e.exports=n(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9876)}),_N_E=e.O()}]);